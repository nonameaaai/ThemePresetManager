# ThemePresetManager

SillyTavern용 테마 프리셋 관리자 확장입니다. 캐릭터별, 채팅별로 테마와 사용자 설정을 자동저장하고 복원하는 시스템을 제공합니다.

## 🌟 주요 기능

### 🎨 테마 및 설정 관리
- **캐릭터별, 채팅별 테마 저장**: 각 캐릭터와 채팅마다 개별적으로 테마와 설정을 저장
- **수동 저장/로드**: 안전한 테마 관리 시스템
- **자동 테마 적용**: 채팅/캐릭터 전환 시 자동으로 저장된 테마 적용 (선택사항)
- **상세설정 패널**: 저장할 설정을 세밀하게 선택 가능

### 💾 스마트 저장 시스템
- **채팅별 테마**: 현재 채팅에만 적용되는 테마 설정
- **캐릭터별 테마**: 현재 캐릭터의 모든 채팅에 적용되는 테마 설정
- **자동 저장 슬롯**: 테마 변경 직전 설정을 자동으로 백업
- **중복 저장 방지**: 이미 저장된 테마가 있으면 확인 후 업데이트

### 🔄 자동 복원 시스템
- **우선순위 적용**: 채팅 테마 → 캐릭터 테마 → 기본 테마 순서로 적용
- **실시간 상태 표시**: 현재 저장 상태를 실시간으로 확인
- **스마트 자동저장**: 사용자 경험에 따른 지능적인 저장 방식

### ⚙️ 고급 관리 기능
- **상세설정 패널**: 테마, UI, 메시지, 기타 설정을 카테고리별로 선택
- **기본 옵션 관리**: 자주 사용하는 설정들을 기본값으로 설정
- **설정 내보내기/가져오기**: 백업 및 복구 기능
- **개별/전체 삭제**: 필요한 설정만 선택적으로 삭제

## 🚀 설치 방법

1. 이 폴더를 `SillyTavern/public/scripts/extensions/third-party/` 디렉토리에 복사
2. SillyTavern을 재시작
3. 설정 메뉴에서 "테마 프리셋 관리자" 확장 활성화

## 📖 사용법

### 기본 설정
1. **확장 활성화**: 설정에서 "확장 활성화" 체크박스 선택
2. **자동 테마 적용**: "자동 테마 적용" 체크박스로 자동 복원 기능 활성화 (권장)

### 현재 상태 확인
- **채팅 저장 상태**: 현재 채팅에 저장된 테마 정보 표시
- **캐릭터 저장 상태**: 현재 캐릭터에 저장된 테마 정보 표시
- 저장 시간과 테마 이름도 함께 표시됩니다

### 수동 저장
1. **채팅에 저장**: "채팅에 저장" 버튼으로 현재 채팅에만 적용되는 테마 저장
2. **캐릭터에 저장**: "캐릭터에 저장" 버튼으로 현재 캐릭터의 모든 채팅에 적용되는 테마 저장
3. **저장 방식**:
   - 상세설정 패널이 열려있으면: 선택된 설정만 저장
   - 상세설정 패널이 닫혀있으면: 기본 옵션으로 설정된 것들만 저장

### 상세설정 (고급 사용자용)
1. **상세설정 패널 열기**: "상세설정" 버튼을 클릭
2. **카테고리별 설정 선택**:
   - **테마 설정**: 테마, 커스텀 CSS, 배경, 색상 등
   - **UI 설정**: 레이아웃, 크기, 스타일 등
   - **메시지 설정**: 메시지 표시 방식, 타이머, 토큰 등
   - **기타 설정**: 기타 사용자 설정들
3. **기본 옵션 관리**:
   - **현재 선택을 기본으로 저장**: 현재 체크된 설정들을 기본값으로 설정
   - **현재 선택된 옵션 보기**: 실제로 저장될 설정들 미리보기 (디버그용)
4. **빠른 선택**: 전체 선택, 전체 해제, 기본옵션만 선택, 기본값으로 초기화

### 수동 로드
1. **채팅에서 로드**: "채팅에서 로드" 버튼으로 현재 채팅에 저장된 테마 적용
2. **캐릭터에서 로드**: "캐릭터에서 로드" 버튼으로 현재 캐릭터에 저장된 테마 적용
3. **자동 저장 슬롯**: "자동 저장 슬롯에서 복원" 버튼으로 테마 변경 직전 설정 복원

### 자동 저장 슬롯 관리
- **자동 저장 슬롯에서 복원**: 테마 변경 직전 설정으로 되돌리기
- **현재 설정으로 덮어쓰기**: 현재 설정을 자동 저장 슬롯에 저장
- **자동 저장 슬롯 삭제**: 자동 저장 슬롯 삭제

### 설정 삭제
1. **채팅 설정 삭제**: 현재 채팅의 테마 설정만 삭제
2. **캐릭터 설정 삭제**: 현재 캐릭터의 테마 설정만 삭제
3. **모든 설정 삭제**: 모든 저장된 테마 설정을 한 번에 삭제 (페이지 새로고침)

### 백업 및 복구
1. **전체 설정 내보내기**: 모든 확장 설정을 JSON 파일로 저장
2. **전체 설정 가져오기**: 이전에 내보낸 설정 복원 (병합/대체 모드 선택)
3. **캐릭터 설정 내보내기**: 현재 캐릭터의 테마만 내보내기
4. **채팅 설정 내보내기**: 현재 채팅의 테마만 내보내기
5. **특정 설정 가져오기**: 특정 캐릭터/채팅 테마만 가져오기

### 디버깅 도구
- **현재 UI 상태 확인**: 현재 적용된 테마와 설정을 콘솔에 출력
- **전체 저장된 테마 목록 확인**: 모든 저장된 테마의 상세 정보를 콘솔에 출력

## ⚙️ 설정 옵션

| 옵션 | 설명 |
|------|------|
| 확장 활성화 | 전체 확장 기능을 켜거나 끕니다 |
| 자동 테마 적용 | 채팅/캐릭터 변경 시 자동으로 저장된 테마를 적용합니다 (권장) |

## 🔧 작동 원리

### 저장 우선순위
1. **채팅 테마**: 특정 채팅에만 적용되는 테마 (최우선)
2. **캐릭터 테마**: 캐릭터의 모든 채팅에 적용되는 테마 (차선)

### 자동 적용 순서
1. 채팅을 전환하면 해당 채팅에 저장된 테마가 있으면 적용
2. 채팅에 저장된 테마가 없으면 캐릭터에 저장된 테마 적용
3. 둘 다 없으면 기본 테마 유지

### 스마트 자동저장
- **사용자가 상세설정을 사용한 경우**: 전체선택 사양으로 저장
- **사용자가 상세설정을 사용하지 않은 경우**: 기본옵션만 저장
- **자동 저장 슬롯**: 테마 변경 직전의 모든 설정을 자동으로 백업

### 저장 방식
- **상세설정 패널이 열려있을 때**: 선택된 설정만 저장
- **상세설정 패널이 닫혀있을 때**: 기본 옵션으로 설정된 것들만 저장
- **중복 저장 시**: 확인 메시지 후 업데이트

## 🌍 다국어 지원

- **영어 (en)**: 기본 언어
- **한국어 (ko-kr)**: 한국어 지원

## 🛠️ 디버깅

확장은 상세한 디버그 로그를 콘솔에 출력합니다:
- 설정 로드/저장 과정
- 테마 적용 과정
- 상태 업데이트 과정
- 오류 발생 시 상세 정보

### 디버깅 도구
- **현재 설정 확인**: 현재 적용된 테마와 설정을 콘솔에 출력
- **저장된 설정 확인**: 모든 저장된 테마의 상세 정보를 콘솔에 출력

## 📋 시스템 요구사항

- SillyTavern 1.10.0 이상
- 웹 브라우저 (Chrome, Firefox, Safari, Edge)
- JavaScript 활성화

## 🔒 보안 및 개인정보

- **민감한 정보 제외**: API 키, 비밀번호 등 민감한 정보는 저장하지 않습니다
- **로컬 저장**: 모든 설정은 로컬에만 저장됩니다
- **선택적 저장**: 사용자가 원하는 설정만 선택적으로 저장 가능

## 🐛 알려진 문제

- 기본 옵션만 사용 기능은 현재 개발 중입니다
- 일부 고급 설정은 상세설정 패널에서만 저장 가능합니다

## 📝 변경 로그

### 버전 2.1.0
- 기본 옵션 관리 기능 추가
- 상세설정 패널에 기본 옵션 관리 섹션 추가
- 저장 방식 개선으로 더 효율적인 테마 관리
- 다국어 지원 추가 (영어, 한국어)
- 스마트 자동저장 기능 개선

### 버전 2.0.0
- 상세설정 패널 추가
- 카테고리별 설정 선택 기능
- 자동 저장 슬롯 기능
- 설정 내보내기/가져오기 기능
- UI/UX 개선

### 버전 1.0.0
- 기본 테마 저장/로드 기능
- 캐릭터별, 채팅별 테마 관리
- 자동 테마 적용 기능

## 🤝 기여하기

버그 리포트나 기능 제안은 GitHub Issues를 통해 제출해주세요.

## 📄 라이선스

AGPL-3.0

## 👨‍💻 개발자

yourNameHere

---

**💡 팁**: 처음 사용하시는 분은 "자동 테마 적용"을 활성화하고 기본 설정으로 시작하시는 것을 권장합니다. 고급 기능은 필요에 따라 점진적으로 사용해보세요.
